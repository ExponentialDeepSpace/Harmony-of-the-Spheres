/*! For license information please see cb92dfd789cdd58b5f97.worker.js.LICENSE */
!function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=19)}([function(t,e){t.exports=function(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function r(e){return t.exports=r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},r(e)}t.exports=r},function(t,e,r){var n=r(16),i=r(6);t.exports=function(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?i(t):e}},function(t,e,r){var n=r(17);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}},function(t,e){function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e,r){var n=r(0);t.exports=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},i=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})))),i.forEach((function(e){n(t,e,r[e])}))}return t}},function(t,e,r){var n=r(13),i=r(14),s=r(15);t.exports=function(t,e){return n(t)||i(t,e)||s()}},function(t,e,r){t.exports=r(12)},function(t,e,r){r(2);var n=r(18);function i(e,r,s){return"undefined"!=typeof Reflect&&Reflect.get?t.exports=i=Reflect.get:t.exports=i=function(t,e,r){var i=n(t,e);if(i){var s=Object.getOwnPropertyDescriptor(i,e);return s.get?s.get.call(r):s.value}},i(e,r,s||e)}t.exports=i},function(t,e){function r(t,e,r,n,i,s,o){try{var a=t[s](o),c=a.value}catch(t){return void r(t)}a.done?e(c):Promise.resolve(c).then(n,i)}t.exports=function(t){return function(){var e=this,n=arguments;return new Promise((function(i,s){var o=t.apply(e,n);function a(t){r(o,i,s,a,c,"next",t)}function c(t){r(o,i,s,a,c,"throw",t)}a(void 0)}))}}},function(t,e,r){var n=function(t){"use strict";var e,r=Object.prototype,n=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function c(t,e,r,n){var i=e&&e.prototype instanceof p?e:p,s=Object.create(i.prototype),o=new j(n||[]);return s._invoke=function(t,e,r){var n=u;return function(i,s){if(n===f)throw new Error("Generator is already running");if(n===d){if("throw"===i)throw s;return P()}for(r.method=i,r.arg=s;;){var o=r.delegate;if(o){var a=w(o,r);if(a){if(a===y)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===u)throw n=d,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=f;var c=h(t,e,r);if("normal"===c.type){if(n=r.done?d:l,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n=d,r.method="throw",r.arg=c.arg)}}}(t,r,o),s}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u="suspendedStart",l="suspendedYield",f="executing",d="completed",y={};function p(){}function v(){}function m(){}var g={};g[s]=function(){return this};var x=Object.getPrototypeOf,z=x&&x(x(k([])));z&&z!==r&&n.call(z,s)&&(g=z);var V=m.prototype=p.prototype=Object.create(g);function b(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function S(t){var e;this._invoke=function(r,i){function s(){return new Promise((function(e,s){!function e(r,i,s,o){var a=h(t[r],t,i);if("throw"!==a.type){var c=a.arg,u=c.value;return u&&"object"==typeof u&&n.call(u,"__await")?Promise.resolve(u.__await).then((function(t){e("next",t,s,o)}),(function(t){e("throw",t,s,o)})):Promise.resolve(u).then((function(t){c.value=t,s(c)}),(function(t){return e("throw",t,s,o)}))}o(a.arg)}(r,i,e,s)}))}return e=e?e.then(s,s):s()}}function w(t,r){var n=t.iterator[r.method];if(n===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=e,w(t,r),"throw"===r.method))return y;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var i=h(n,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var s=i.arg;return s?s.done?(r[t.resultName]=s.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function k(t){if(t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}return{next:P}}function P(){return{value:e,done:!0}}return v.prototype=V.constructor=m,m.constructor=v,m[a]=v.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,a in t||(t[a]="GeneratorFunction")),t.prototype=Object.create(V),t},t.awrap=function(t){return{__await:t}},b(S.prototype),S.prototype[o]=function(){return this},t.AsyncIterator=S,t.async=function(e,r,n,i){var s=new S(c(e,r,n,i));return t.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},b(V),V[a]="Generator",V[s]=function(){return this},V.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=k,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function i(n,i){return a.type="throw",a.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),h=n.call(o,"finallyLoc");if(c&&h){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=t,o.arg=e,s?(this.method="next",this.next=s.finallyLoc,y):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;O(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:k(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}(t.exports);try{regeneratorRuntime=n}catch(t){Function("r","regeneratorRuntime = r")(n)}},function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},function(t,e){t.exports=function(t,e){var r=[],n=!0,i=!1,s=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done)&&(r.push(o.value),!e||r.length!==e);n=!0);}catch(t){i=!0,s=t}finally{try{n||null==a.return||a.return()}finally{if(i)throw s}}return r}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(t,e){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(e){return"function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?t.exports=n=function(t){return r(t)}:t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},n(e)}t.exports=n},function(t,e){function r(e,n){return t.exports=r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},r(e,n)}t.exports=r},function(t,e,r){var n=r(2);t.exports=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=n(t)););return t}},function(t,e,r){"use strict";r.r(e);var n=r(9),i=r.n(n),s=r(7),o=r.n(s),a=r(8),c=r.n(a),h=r(11),u=r.n(h),l=r(1),f=r.n(l),d=r(5),y=r.n(d),p=r(0),v=r.n(p);var m=function(){function t(){f()(this,t),v()(this,"x",void 0),v()(this,"y",void 0),v()(this,"z",void 0),this.x=0,this.y=0,this.z=0}return y()(t,[{key:"set",value:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}},{key:"toArray",value:function(){return[this.x,this.y,this.z]}},{key:"toObject",value:function(){return{x:this.x,y:this.y,z:this.z}}},{key:"getLength",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"normalise",value:function(){return this.divideByScalar(this.getLength())}},{key:"getDistanceParameters",value:function(t){var e=this.x-t.x,r=this.y-t.y,n=this.z-t.z,i=e*e+r*r+n*n;return{dx:e,dy:r,dz:n,dSquared:i,d:Math.sqrt(i)}}},{key:"getDirectionalSlope",value:function(t){var e=this.getDistanceParameters(t),r=e.dx,n=e.dy,i=e.dz,s=e.d;return{x:r/s*r/s,y:n/s*n/s,z:i/s*i/s}}},{key:"add",value:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}},{key:"subtract",value:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}},{key:"subtractFrom",value:function(t){return this.x=t.x-this.x,this.y=t.y-this.y,this.z=t.z-this.z,this}},{key:"multiply",value:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}},{key:"divide",value:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}},{key:"multiplyByScalar",value:function(t){return this.x*=t,this.y*=t,this.z*=t,this}},{key:"divideByScalar",value:function(t){return this.x/=t,this.y/=t,this.z/=t,this}},{key:"addScaledVector",value:function(t,e){return this.x+=t*e.x,this.y+=t*e.y,this.z+=t*e.z,this}},{key:"subtractScaledVector",value:function(t,e){return this.x-=t*e.x,this.y-=t*e.y,this.z-=t*e.z,this}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y+this.z*t.z}},{key:"cross",value:function(t){var e=this.y*t.z-this.z*t.y,r=this.z*t.x-this.x*t.z,n=this.x*t.y-this.y*t.x;return this.x=e,this.y=r,this.z=n,this}},{key:"rotate",value:function(t,e){var r,n=(r=e,Math.PI/180*r)/2,i=Math.sin(n),s=t.x*i,o=t.y*i,a=t.z*i,c=Math.cos(n),h=c*this.x+o*this.z-a*this.y,u=c*this.y+a*this.x-s*this.z,l=c*this.z+s*this.y-o*this.x,f=-s*this.x-o*this.y-a*this.z;return this.x=h*c+f*-s+u*-a-l*-o,this.y=u*c+f*-o+l*-s-h*-a,this.z=l*c+f*-a+h*-o-u*-s,this}}]),t}(),g=function(){function t(e){var r=e.g,n=e.dt,i=e.masses,s=e.elapsedTime;f()(this,t),v()(this,"g",void 0),v()(this,"dt",void 0),v()(this,"masses",void 0),v()(this,"elapsedTime",void 0),v()(this,"softening",void 0),v()(this,"softeningSquared",void 0),v()(this,"useBarnesHut",void 0),v()(this,"theta",void 0),v()(this,"maximumDistance",void 0),v()(this,"a",void 0),v()(this,"v",void 0),v()(this,"p",void 0),this.g=r,this.dt=n,this.masses=i,this.softening=0,this.softeningSquared=this.softening*this.softening,this.useBarnesHut=!0,this.theta=.5,this.maximumDistance=1e3,this.elapsedTime=s,this.a=new m,this.v=new m,this.p=new m}return y()(t,[{key:"getDistanceParams",value:function(t,e){var r=e.x-t.x,n=e.y-t.y,i=e.z-t.z;return{dx:r,dy:n,dz:i,dSquared:r*r+n*n+i*i}}},{key:"getStateVectors",value:function(t){for(var e=[],r=[],n=t.length,i=0;i<n;i++){var s=t[i];e[i]={x:s.x,y:s.y,z:s.z},r[i]={x:s.vx,y:s.vy,z:s.vz}}return{p:e,v:r}}},{key:"updateStateVectors",value:function(t,e){for(var r=t.length,n=0;n<r;n++){var i=t[n],s=e[n],o=this.masses[n];o.x=i.x,o.y=i.y,o.z=i.z,o.vx=s.x,o.vy=s.y,o.vz=s.z}}},{key:"generatePositionVectors",value:function(t,e){for(var r=[],n=t.length,i=0;i<n;i++){var s=t[i],o=this.masses[i];r[i]=this.p.set({x:o.x,y:o.y,z:o.z}).addScaledVector(e,{x:s.x,y:s.y,z:s.z}).toObject()}return r}},{key:"generateAccelerationVectors",value:function(t){if(this.useBarnesHut){var e=this.constructBHTree(t);return this.BHGenerateAccelerationVectors(t,e)}for(var r=[],n=t.length,i=0;i<n;i++){this.a.set({x:0,y:0,z:0});for(var s=t[i],o=0;o<n;o++)if(i!==o&&this.masses[o].m>0){var a=t[o],c=this.getDistanceParams(s,a),h=this.g*this.masses[o].m/Math.pow(c.dSquared+this.softeningSquared,1.5);this.a.addScaledVector(h,{x:c.dx,y:c.dy,z:c.dz})}r[i]={x:this.a.x,y:this.a.y,z:this.a.z}}return r}},{key:"generateVelocityVectors",value:function(t,e){for(var r=[],n=t.length,i=0;i<n;i++){var s=t[i],o=this.masses[i];r[i]=this.v.set({x:o.vx,y:o.vy,z:o.vz}).addScaledVector(e,{x:s.x,y:s.y,z:s.z}).toObject()}return r}},{key:"iterate",value:function(){var t=this.getStateVectors(this.masses),e=this.generateAccelerationVectors(t.p),r=this.generateVelocityVectors(e,this.dt),n=this.generatePositionVectors(t.v,this.dt);this.updateStateVectors(n,r),this.incrementElapsedTime()}},{key:"incrementElapsedTime",value:function(){this.elapsedTime+=this.dt}},{key:"isInTree",value:function(t,e){var r=e.size;return e.position.x<=t.x&&t.x<e.position.x+r&&e.position.y<=t.y&&t.y<e.position.y+r&&e.position.z<=t.z&&t.z<e.position.z+r}},{key:"generateChildren",value:function(t){var e=t.size/2,r=new m;return[{size:e,position:t.position,CoM:{x:0,y:0,z:0},nMasses:0,mass:0,children:[]},{size:e,position:r.set(t.position).add({x:0,y:e,z:0}).toObject(),CoM:{x:0,y:0,z:0},nMasses:0,mass:0,children:[]},{size:e,position:r.set(t.position).add({x:e,y:0,z:0}).toObject(),CoM:{x:0,y:0,z:0},nMasses:0,mass:0,children:[]},{size:e,position:r.set(t.position).add({x:e,y:e,z:0}).toObject(),CoM:{x:0,y:0,z:0},nMasses:0,mass:0,children:[]},{size:e,position:r.set(t.position).add({x:0,y:0,z:e}).toObject(),CoM:{x:0,y:0,z:0},nMasses:0,mass:0,children:[]},{size:e,position:r.set(t.position).add({x:0,y:e,z:e}).toObject(),CoM:{x:0,y:0,z:0},nMasses:0,mass:0,children:[]},{size:e,position:r.set(t.position).add({x:e,y:0,z:e}).toObject(),CoM:{x:0,y:0,z:0},nMasses:0,mass:0,children:[]},{size:e,position:r.set(t.position).add({x:e,y:e,z:e}).toObject(),CoM:{x:0,y:0,z:0},nMasses:0,mass:0,children:[]}]}},{key:"insertMassInTree",value:function(t,e){var r=e.children.length;if(0!==r){if(1==r){var n=e.children[0];return e.children=this.generateChildren(e),this.insertMassInTree(t,e),void this.insertMassInTree(n,e)}if(8===r)for(var i=0;i<8;i++)if(this.isInTree({x:t.x,y:t.y,z:t.z},e.children[i])){var s=new m;e.CoM=s.set(e.CoM).addScaledVector(t.m,{x:t.x,y:t.y,z:t.z}).toObject(),e.mass+=t.m,this.insertMassInTree(t,e.children[i])}}else e.children=[t]}},{key:"fixCoM",value:function(t){var e=t.children.length,r=new m;if(8===e){t.CoM=r.set(t.CoM).multiplyByScalar(1/t.mass).toObject();for(var n=0;n<8;n++)this.fixCoM(t.children[n])}}},{key:"constructBHTree",value:function(t){for(var e=this.maximumDistance,r={size:e,position:{x:-e/2,y:-e/2,z:-e/2},CoM:{x:-e/2,y:-e/2,z:-e/2},mass:0,children:[]},n=this.masses.length,i=0;i<n;i++)t[i].m=this.masses[i].m,this.insertMassInTree(t[i],r);return this.fixCoM(r),r}},{key:"BHAccelerate",value:function(t,e){var r=new m,n=e.children.length;if(0===n)return{x:0,y:0,z:0};if(1===n){var i=e.children[0];r.set({x:i.x,y:i.y,z:i.z});var s=r.subtract(t),o=s.getLength();return 0===o?{x:0,y:0,z:0}:s.multiplyByScalar(i.m*this.g/Math.pow(o*o+this.softeningSquared,1.5)).toObject()}if(8===n){var a=r.set(e.CoM).subtract(t),c=a.getLength();if(0===c)return{x:0,y:0,z:0};if(e.size/c<this.theta)return a.multiplyByScalar(this.g*e.mass/Math.pow(c*c+this.softeningSquared,1.5)).toObject();for(var h=r.set({x:0,y:0,z:0}),u=0;u<8;u++)h=h.add(this.BHAccelerate(t,e.children[u]));return h.toObject()}return null}},{key:"BHGenerateAccelerationVectors",value:function(t,e){for(var r=t.length,n=[],i=0;i<r;i++)n[i]=this.BHAccelerate(t[i],e);return n}}]),t}(),x=r(3),z=r.n(x),V=r(2),b=r.n(V),S=r(4),w=r.n(S),M=function(t){function e(){return f()(this,e),z()(this,b()(e).apply(this,arguments))}return w()(e,t),y()(e,[{key:"iterate",value:function(){for(var t=this.getStateVectors(this.masses),e=this.generateAccelerationVectors(t.p),r=this.generateVelocityVectors(e,this.dt/2),n=this.generatePositionVectors(t.v,this.dt/2),i=this.generateAccelerationVectors(n),s=this.generateVelocityVectors(i,this.dt/2),o=this.generatePositionVectors(r,this.dt/2),a=this.generateAccelerationVectors(o),c=this.generateVelocityVectors(a,this.dt),h=this.generatePositionVectors(s,this.dt),u=this.generateAccelerationVectors(h),l=[],f=[],d=this.masses.length,y=0;y<d;y++)l[y]={x:e[y].x/6+i[y].x/3+a[y].x/3+u[y].x/6,y:e[y].y/6+i[y].y/3+a[y].y/3+u[y].y/6,z:e[y].z/6+i[y].z/3+a[y].z/3+u[y].z/6},f[y]={x:t.v[y].x/6+r[y].x/3+s[y].x/3+c[y].x/6,y:t.v[y].y/6+r[y].y/3+s[y].y/3+c[y].y/6,z:t.v[y].z/6+r[y].z/3+s[y].z/3+c[y].z/6};this.updateStateVectors(this.generatePositionVectors(f,this.dt),this.generateVelocityVectors(l,this.dt)),this.incrementElapsedTime()}}]),e}(g),O=r(6),j=r.n(O),k=function(t){function e(t){var r,n=t.g,i=t.dt,s=t.masses,o=t.elapsedTime;return f()(this,e),r=z()(this,b()(e).call(this,{g:n,dt:i,masses:s,elapsedTime:o})),v()(j()(r),"utilityVector",void 0),v()(j()(r),"lastAcc",void 0),r.utilityVector=new m,r.lastAcc=r.generateAccelerationVectors(r.getStateVectors(r.masses).p),r}return w()(e,t),y()(e,[{key:"generateVerletPositionVectors",value:function(t,e,r){for(var n=[],i=e.length,s=0;s<i;s++){var o=e[s],a=t.v[s],c=this.masses[s];n[s]=this.p.set({x:c.x,y:c.y,z:c.z}).addScaledVector(r,a).addScaledVector(.5,this.utilityVector.set(o).multiplyByScalar(Math.pow(r,2))).toObject()}return n}},{key:"generateVerletVelocityVectors",value:function(t,e,r){for(var n=[],i=t.length,s=0;s<i;s++){var o=t[s],a=e[s],c=this.masses[s];n[s]=this.v.set({x:c.vx,y:c.vy,z:c.vz}).addScaledVector(.5,this.utilityVector.set(o).add(a).multiplyByScalar(r)).toObject()}return n}},{key:"iterate",value:function(){var t=this.getStateVectors(this.masses),e=this.lastAcc,r=this.generateVerletPositionVectors(t,e,this.dt),n=this.generateAccelerationVectors(r),i=this.generateVerletVelocityVectors(e,n,this.dt);this.lastAcc=n,this.updateStateVectors(r,i),this.incrementElapsedTime()}}]),e}(g),P=r(10),T=r.n(P),E=function(t){function e(t){var r,n=t.g,i=t.dt,s=t.masses,o=t.elapsedTime;return f()(this,e),r=z()(this,b()(e).call(this,{g:n,dt:i,masses:s,elapsedTime:o})),v()(j()(r),"epsilon",void 0),v()(j()(r),"lambda",void 0),v()(j()(r),"chi",void 0),r.epsilon=.1786178958448091,r.lambda=-.2123418310626054,r.chi=-.0662645826698185,r}return w()(e,t),y()(e,[{key:"generatePositionVectors",value:function(t,r,n){T()(b()(e.prototype),"generatePositionVectors",this).call(this,t,r);for(var i=[],s=t.length,o=0;o<s;o++){var a=t[o],c=n[o];i[o]=this.p.set({x:c.x,y:c.y,z:c.z}).addScaledVector(r,a).toObject()}return i}},{key:"generateVelocityVectors",value:function(t,r,n){T()(b()(e.prototype),"generateVelocityVectors",this).call(this,t,r);for(var i=[],s=n.length,o=0;o<s;o++){var a=n[o],c=t[o];i[o]=this.v.set({x:a.x,y:a.y,z:a.z}).addScaledVector(r,c).toObject()}return i}},{key:"iterate",value:function(){for(var t=this.epsilon*this.dt,e=(1-2*this.lambda)*this.dt/2,r=this.chi*this.dt,n=this.lambda*this.dt,i=(1-2*(this.chi+this.epsilon))*this.dt,s=this.getStateVectors(this.masses),o=[t,r,i,r,t],a=[e,n,n,e],c=s.p,h=s.v,u=a.length,l=0;l<u;l++)c=this.generatePositionVectors(h,o[l],c),h=this.generateVelocityVectors(this.generateAccelerationVectors(c),a[l],h);c=this.generatePositionVectors(h,o[u],c),this.updateStateVectors(c,h),this.incrementElapsedTime()}}]),e}(g),A=function(t){function e(t){var r,n=t.g,i=t.dt,s=t.masses,o=t.elapsedTime;return f()(this,e),r=z()(this,b()(e).call(this,{g:n,dt:i,masses:s,elapsedTime:o})),v()(j()(r),"coefficients",void 0),v()(j()(r),"delta",void 0),v()(j()(r),"alpha",void 0),v()(j()(r),"beta",void 0),v()(j()(r),"tempSumA",void 0),v()(j()(r),"tempSumB",void 0),r.coefficients=[],r.delta=[],r.alpha=[],r.beta=[],r.tempSumA=new m,r.tempSumB=new m,r}return w()(e,t),y()(e,[{key:"getK",value:function(t){var e=t.p,r=t.v,n=[];n[0]=this.generateAccelerationVectors(e);for(var i=this.coefficients.length,s=this.masses.length,o=0;o<i;o++){for(var a=[],c=this.coefficients[o].length,h=0;h<s;h++){this.tempSumA.set({x:0,y:0,z:0});for(var u=0;u<c;u++)this.tempSumA.addScaledVector(this.coefficients[o][u],n[u][h]);a[h]=this.p.set({x:e[h].x,y:e[h].y,z:e[h].z}).addScaledVector(this.delta[o]*this.dt,r[h]).addScaledVector(this.dt*this.dt,this.tempSumA).toObject()}n[c]=this.generateAccelerationVectors(a)}return n}},{key:"generateVectors",value:function(t,e){for(var r=[],n=[],i=this.alpha.length,s=this.masses.length,o=0;o<s;o++){this.tempSumA.set({x:0,y:0,z:0}),this.tempSumB.set({x:0,y:0,z:0});for(var a=0;a<i;a++)this.tempSumA.addScaledVector(this.alpha[a],e[a][o]),this.tempSumB.addScaledVector(this.beta[a],e[a][o]);r[o]=this.p.set({x:t.p[o].x,y:t.p[o].y,z:t.p[o].z}).addScaledVector(this.dt,t.v[o]).addScaledVector(this.dt*this.dt,this.tempSumA).toObject(),n[o]=this.v.set({x:t.v[o].x,y:t.v[o].y,z:t.v[o].z}).addScaledVector(this.dt,this.tempSumB).toObject()}return[r,n]}},{key:"iterate",value:function(){var t=this.getStateVectors(this.masses),e=this.getK(t),r=this.generateVectors(t,e),n=c()(r,2),i=n[0],s=n[1];this.updateStateVectors(i,s),this.incrementElapsedTime()}}]),e}(g),L=function(t){function e(t){var r,n=t.g,i=t.dt,s=t.masses,o=t.elapsedTime;return f()(this,e),(r=z()(this,b()(e).call(this,{g:n,dt:i,masses:s,elapsedTime:o}))).coefficients=[[.0630306154],[.0451918359,.3117775487]],r.delta=[.3550510257,.8449489743],r.alpha=[.1111111111,.3305272081,.0583616809],r.beta=[.1111111111,.5124858262,.3764030627],r}return w()(e,t),e}(A),B=function(t){function e(t){var r,n=t.g,i=t.dt,s=t.masses,o=t.elapsedTime;return f()(this,e),(r=z()(this,b()(e).call(this,{g:n,dt:i,masses:s,elapsedTime:o}))).coefficients=[[.02254425214],[-.0011439805,.1755086728],[.1171541673,.139375471,.1588063156]],r.delta=[.2123405385,.5905331358,.9114120406],r.alpha=[.0625000001,.2590173402,.1589523623,.0195302974],r.beta=[.0625000001,.3288443202,.3881934687,.220462211],r}return w()(e,t),e}(A),_=function(t){function e(t){var r,n=t.g,i=t.dt,s=t.masses,o=t.elapsedTime;return f()(this,e),(r=z()(this,b()(e).call(this,{g:n,dt:i,masses:s,elapsedTime:o}))).coefficients=[[1/8],[1/18,0],[1/9,0,1/9],[0,-8/11,9/11,9/22]],r.delta=[.5,1/3,2/3,1],r.alpha=[11/120,-4/15,.45,.225,0],r.beta=[11/120,-8/15,.675,.675,11/120],r}return w()(e,t),e}(A),q=function(t){function e(t){var r,n=t.g,i=t.dt,s=t.masses,o=t.elapsedTime;return f()(this,e),(r=z()(this,b()(e).call(this,{g:n,dt:i,masses:s,elapsedTime:o}))).coefficients=[[.005675576359],[.00756743515,.01513487029],[.1400361674,-.254478057,.2900721177],[-1.0216436141,2.6539701073,-1.486159095,.2733606017],[-20.4083294915,50.3143181086,-32.3044178724,2.9494960939,-.0786748385]],r.delta=[.1065417886,.2130835772,.5926723008,.916,.972],r.alpha=[.0627170177,0,.2596874616,.1587555586,.0191237845,-.0002838224],r.beta=[.0627170177,0,.3300064074,.3897489881,.2276641014,-.0101365146],r}return w()(e,t),e}(A),D=function(t){function e(t){var r;return f()(this,e),(r=z()(this,b()(e).call(this,t))).tol=t.tol,r.maxDt=t.maxDt,r.minDt=t.minDt,r.tempSumHat=new m,r.pHat=new m,r}return w()(e,t),y()(e,[{key:"calculateError",value:function(t,e){for(var r=0,n=t.length,i=0;i<n;i++)r+=Math.sqrt(Math.pow(t[i].x-e[i].x,2)+Math.pow(t[i].y-e[i].y,2)+Math.pow(t[i].z-e[i].z,2));return r}},{key:"generateVectors",value:function(t,e){for(var r=[],n=[],i=[],s=this.alpha.length,o=this.masses.length,a=0;a<o;a++){this.tempSumA.set({x:0,y:0,z:0}),this.tempSumB.set({x:0,y:0,z:0}),this.tempSumHat.set({x:0,y:0,z:0});for(var c=0;c<s;c++)this.tempSumA.addScaledVector(this.alpha[c],e[c][a]),this.tempSumHat.addScaledVector(this.alphaHat[c],e[c][a]),this.tempSumB.addScaledVector(this.beta[c],e[c][a]);r[a]=this.p.set({x:t.p[a].x,y:t.p[a].y,z:t.p[a].z}).addScaledVector(this.dt,t.v[a]).addScaledVector(this.dt*this.dt,this.tempSumA).toObject(),n[a]=this.p.set({x:t.p[a].x,y:t.p[a].y,z:t.p[a].z}).addScaledVector(this.dt,t.v[a]).addScaledVector(this.dt*this.dt,this.tempSumHat).toObject(),i[a]=this.v.set({x:t.v[a].x,y:t.v[a].y,z:t.v[a].z}).addScaledVector(this.dt,this.tempSumB).toObject()}return[r,i,n]}},{key:"iterate",value:function(){for(var t=this.getStateVectors(this.masses),e=1e10;e>this.tol;){var r=this.getK(t),n=this.generateVectors(t,r),i=c()(n,3),s=i[0],o=i[1],a=i[2];e=this.calculateError(s,a);var h=Math.pow(2*e/this.tol,1/this.errorOrder);this.dt=h>.2?this.dt/h:5*this.dt,this.dt<this.minDt?this.dt=this.minDt:this.dt>this.maxDt&&(this.dt=this.maxDt)}this.updateStateVectors(s,o),this.incrementElapsedTime()}}]),e}(A),C=function(t){function e(t){var r;return f()(this,e),(r=z()(this,b()(e).call(this,t))).errorOrder=6,r.coefficients=[[.005],[-1/2200,1/22],[637/6600,-7/110,7/33],[225437/1968750,-30073/281250,65569/281250,-9367/984375],[151/2142,5/116,385/1368,55/168,-6250/28101]],r.delta=[.1,.3,.7,.68,1],r.alpha=[151/2142,5/116,385/1368,55/168,-6250/28101,0],r.alphaHat=[1349/157500,.15746,192199/9e5,521683/21e5,-.128,0],r.beta=[151/2142,25/522,275/684,275/252,-78125/112404,1/12],r}return w()(e,t),e}(D),I=function(t){function e(t){var r;return f()(this,e),(r=z()(this,b()(e).call(this,t))).errorOrder=12,r.coefficients=[[2e-4],[.0002666666666666667,.0005333333333333334],[.002916666666666667,-.004166666666666667,.00625],[.0016460905349794238,0,.0054869684499314125,.0017558299039780521],[.0019456,0,.007151746031746032,.0029127111111111113,.0007899428571428571],[.00056640625,0,.0008809730489417989,-.0004369212962962963,.00033900669642857143,-9946469907407407e-20],[.0030833333333333333,0,0,.0017777777777777779,.0027,.0015782828282828283,.01086060606060606],[.00365183937480113,0,.003965171714072343,.0031972582629306284,.008221467306855435,-.0013130926959572379,.009771586968064868,.003755769069232834],[.003707241068718501,0,.005082045854555286,.001174708002175412,-.021147629915126993,.06010463698107881,.02010573476850619,-.02835075012293358,.014879568918581932],[.03512537656073344,0,-.008615749195138479,-.005791448051007917,1.945554823782616,-3.4351238674565137,-.10930701107475221,2.3496383118995166,-.7560094086870229,.10952897222156927],[.020527792537482496,0,-.00728644676448018,-.0021153556079618403,.9275807968723522,-1.6522824844257367,-.02107956300568657,1.2065364326207872,-.4137144770010661,.09079873982809654,.005355552600533985],[-.14324078875545515,0,.012528703773091817,.006826019163969827,-4.799555395574387,5.6986250439519415,.7553430369523645,-.12755487858281084,-1.9605926051117384,.9185609056635262,-.23880085505284432,.15911081357234216],[.8045019205520489,0,-.016658527067011247,-.021415834042629735,16.827235928962466,-11.172835357176098,-3.377159297226324,-15.243326655360846,17.179835738215417,-5.437719239823995,1.3878671618364655,-.5925827732652812,.029603873171297354],[-.913296766697358,0,.0024112725757805178,.01765812269386174,-14.851649779720384,2.1589708670045757,3.99791558311788,28.434151800232232,-25.2593643549416,7.733878542362238,-1.8913028948478674,1.0014845070224718,.004641199599109052,.011218755022148957],[-.27519629720559396,0,.03661188877915492,.009789519688231562,-12.293062345886211,14.207226453937903,1.5866476906789537,2.4577735327595946,-8.935193694403273,4.373672731613407,-1.8347181765449492,1.1592085289061491,-.017290253165383924,.019325977904460768,.005204442937554993],[1.3076391847404059,0,.017364109189745843,-.018544456454265796,14.811522032867726,9.38317630848247,-5.2284261999445425,-48.95128052584765,38.297096034337926,-10.58738133697598,2.4332304376226275,-1.0453406042575444,.0717732095086726,.0021622109708082783,.007009595759602514,0]],r.delta=[.02,.04,.1,.13333333333333333,.16,.05,.2,.25,.3333333333333333,.5,.5555555555555556,.75,.8571428571428571,.9452162222720143,1,1],r.alpha=[.012127868517185414,0,0,0,0,0,.08629746251568875,.2525469581187147,-.1974186799326823,.2031869190789726,-.020775808077714918,.10967804874502014,.038065132526466504,.01163406880432423,.0046580297040248785,0,0],r.beta=[.012127868517185414,0,0,0,0,0,.09083943422704079,.3156836976483934,-.2632249065769097,.3047803786184589,-.041551616155429835,.2467756096762953,.15226053010586602,.08143848163026961,.08502571193890811,-.009155189630077963,.025],r.alphaHat=[.01700870190700699,0,0,0,0,0,.0722593359308314,.372026177326753,-.40182114500930355,.3354550683013517,-.13130650107533182,.18943190661604864,.026840802040029046,.016305665605917924,.0037999883566965944,0,0],r}return w()(e,t),e}(D),H=function(t){function e(){return f()(this,e),z()(this,b()(e).apply(this,arguments))}return w()(e,t),y()(e,[{key:"generatePositionVectors",value:function(t,e,r){for(var n=[],i=t.length,s=0;s<i;s++){var o=t[s],a=r[s];n[s]=this.p.set({x:a.x,y:a.y,z:a.z}).addScaledVector(e,o).toObject()}return n}},{key:"generateVelocityVectors",value:function(t,e,r){for(var n=[],i=r.length,s=0;s<i;s++){var o=r[s],a=t[s];n[s]=this.v.set({x:o.x,y:o.y,z:o.z}).addScaledVector(e,a).toObject()}return n}},{key:"iterate",value:function(){for(var t=this.getStateVectors(this.masses),e=[.74409614601461,-.425227929490565,.2762016693478,-.0029155067911599275,-1.446551053702334,1.447868919521046,1.4451324786403945,-1.5386047235397915,-1.5386047235397915,1.4451324786403945,1.447868919521046,-1.446551053702334,-.0029155067911599275,.2762016693478,-.425227929490565,.74409614601461],r=[1.48819229202922,-2.33864815101035,2.89105148970595,-2.89688250328827,.00378039588360192,2.89195744315849,-.00169248587770116,-3.075516961201882,-.00169248587770116,2.89195744315849,.00378039588360192,-2.89688250328827,2.89105148970595,-2.33864815101035,1.48819229202922],n=t.p,i=t.v,s=r.length,o=0;o<s;o++)n=this.generatePositionVectors(i,this.dt*e[o],n),i=this.generateVelocityVectors(this.generateAccelerationVectors(n),this.dt*r[o],i);n=this.generatePositionVectors(i,this.dt*e[s],n),this.updateStateVectors(n,i),this.incrementElapsedTime()}}]),e}(g),N=function(t){function e(){return f()(this,e),z()(this,b()(e).apply(this,arguments))}return w()(e,t),y()(e,[{key:"generatePositionVectors",value:function(t,e,r){for(var n=[],i=t.length,s=0;s<i;s++){var o=t[s],a=r[s];n[s]=this.p.set({x:a.x,y:a.y,z:a.z}).addScaledVector(e,o).toObject()}return n}},{key:"generateVelocityVectors",value:function(t,e,r){for(var n=[],i=r.length,s=0;s<i;s++){var o=r[s],a=t[s];n[s]=this.v.set({x:o.x,y:o.y,z:o.z}).addScaledVector(e,a).toObject()}return n}},{key:"iterate",value:function(){for(var t=this.getStateVectors(this.masses),e=[.3708351821753065,.16628476927529068,-.1091730577518966,-.19155388040992194,-.13739914490621316,.31684454977447707,.3249590053210324,-.24079742347807487,-.24079742347807487,.3249590053210324,.31684454977447707,-.13739914490621316,-.19155388040992194,-.1091730577518966,.16628476927529068,.3708351821753065],r=[.741670364350613,-.4091008258000316,.1907547102962384,-.5738624711160822,.2990641813036559,.33462491824529816,.3152930923967666,-.7968879393529164,.3152930923967666,.33462491824529816,.2990641813036559,-.5738624711160822,.1907547102962384,-.4091008258000316,.741670364350613],n=t.p,i=t.v,s=r.length,o=0;o<s;o++)n=this.generatePositionVectors(i,this.dt*e[o],n),i=this.generateVelocityVectors(this.generateAccelerationVectors(n),this.dt*r[o],i);n=this.generatePositionVectors(i,this.dt*e[s],n),this.updateStateVectors(n,i),this.incrementElapsedTime()}}]),e}(g),G=function(t,e){switch(t){case"RK4":return new M(e);case"Euler":return new g(e);case"Verlet":return new k(e);case"PEFRL":return new E(e);case"Nystrom3":return new L(e);case"Nystrom4":return new B(e);case"Nystrom5":return new _(e);case"Nystrom6":return new q(e);case"RKN64":return new C(e);case"RKN12":return new I(e);case"Yoshida6":return new H(e);case"KahanLi8":return new N(e);default:return new M(e)}},R=function(t,e,r){var n=t.filter((function(t){return t[e].indexOf(r)>-1}))[0];return void 0!==n?n:{}};function F(t,e,r,n){return J(t,Y(t,r),e,r,n)}function K(t,e,r,n){if(1==t)return F(0,0,t,e);if(0==e)return 0;var i=F(.1,0,t,e);return F(function(t,e,r,n,i){for(var s=0,o=0,a=0,c=0,h=0,u=0;u<i;u++){if(s=Y(t,r),a=Q(t,s,e,r),0==(c=U(t,s,e,a,r))&&console.log("fder2 was 0"),h=W(t,s,e,a,c,r),o=t-2*a*c/(2*Math.pow(c,2)-a*h),Math.abs(o-t)<n)return o;t=o}console.log("halley failed :(")}(.1,i,t,n,r),0,t,e)}function Y(t,e){return Math.sqrt(1-Math.pow(e,2)*(1-Math.pow(t,2)))}function J(t,e,r,n,i){var s=0;if(0==i&&Math.sqrt(.6)<t&&t<Math.sqrt(1.4)){var o=e-n*t;s=.5*(o*o*o*(4/3*function(t){for(var e=1,r=1,n=0;;){if(e==(e+=r=r*(3+n)*(1+n)/(2.5+n)*t/(n+1)))return e;n+=1}}(.5*(1-n-t*o)))+4*n*o)}else{s=((function(t,e,r){return-1<=t&&t<1?Math.acos(t*e+r*(1-t*t)):1<t?Math.asinh((e-t*r)*Math.sqrt(t*t-1)):0}(t,e,n)+i*Math.PI)/Math.sqrt(Math.abs(1-t*t))-t+n*e)/(1-t*t)}return s-r}function Q(t,e,r,n){return(3*r*t-2+2*n*n*n*t/e)/(1-t*t)}function U(t,e,r,n,i){return(3*r+5*t*n+2*(1-i*i)*i*i*i/(e*e*e))/(1-t*t)}function W(t,e,r,n,i,s){return(7*t*i+8*n-6*(1-s*s)*Math.pow(s,5)*t/Math.pow(e,5))/(1-Math.pow(t,2))}function X(t,e,r,n,i){var s=Math.floor(e/Math.PI),o=Math.acos(t)+t*Math.sqrt(1-t*t);if(e<o+s*Math.PI&&s>0){var a=K(t,s,n,i);e<a&&(s-=1)}r>s&&console.log("M > Mmax error");var c=function(t,e,r){if(0==r){var n=Math.acos(e)+e*Math.sqrt(1-e*e)+r*Math.PI,i=2*(1-e*e*e)/3;return[t>=n?Math.pow(n/t,2/3)-1:t<i?2.5*i/t*(i-t)/(1-Math.pow(e,5))+1:Math.pow(n/t,Math.log2(i/n))-1]}var s=Math.PI;return[(Math.pow((r*s+s)/(8*t),2/3)-1)/(Math.pow((r*s+s)/(8*t),2/3)+1),(Math.pow(8*t/(r*s),2/3)-1)/(Math.pow(8*t/(r*s),2/3)+1)]}(e,t,r),h=[];return c.forEach((function(s){var o=function(t,e,r,n,i,s){for(var o=0,a=0,c=0,h=0,u=0,l=0,f=0;f<s;f++){if(a=t-(c=J(t,o=Y(t,r),e,r,n))*(((u=Q(t,o,h=c+e,r))*u-c*(l=U(t,o,h,u,r))/2)/(u*(u*u-c*l)+W(t,o,0,u,l,r)*c*c/6)),Math.abs(a-t)<i)return a;t=a}console.log("householder failed")}(s,e,t,r,i,n),a=Y(o,t);h.push({x:o,y:a})})),h}function Z(t,e,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1e-8,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:35,a=new m,c=a.set(e).toObject(),h=a.set(r).toObject(),u=a.set(h).subtract(c).toObject(),l=a.set(u).getLength(),f=a.set(c).getLength(),d=a.set(h).getLength(),y=.5*(f+d+l),p=a.set(e).divideByScalar(f).toObject(),v=a.set(r).divideByScalar(d).toObject(),g=a.set(p).cross(v).normalise().toObject(),x=Math.sqrt(1-Math.min(1,l/y));g.z<0&&(x=-x,g=a.set(g).multiplyByScalar(-1).toObject());var z=a.set(g).cross(p).toObject(),V=a.set(g).cross(v).toObject(),b=Math.sqrt(2*n/Math.pow(y,3))*t,S=X(x,b,i,o,s),w=Math.sqrt(n*y/2),M=(f-d)/l,O=Math.sqrt(1-Math.pow(M,2)),j=[];return S.forEach((function(t){var e=function(t,e,r,n,i,s,o,a){return{Vr1:s*(i*e-t-o*(i*e+t))/r,Vr2:-s*(i*e-t+o*(i*e+t))/n,Vt1:s*a*(e+i*t)/r,Vt2:s*a*(e+i*t)/n}}(t.x,t.y,f,d,x,w,M,O),r=e.Vr1,n=e.Vr2,i=e.Vt1,s=e.Vt2,o=a.set(p).multiplyByScalar(r).addScaledVector(i,z).toObject(),c=a.set(v).multiplyByScalar(n).addScaledVector(s,V).toObject();j.push({initVel:o,finalVel:c})})),j}self.onmessage=function(){var t=u()(i.a.mark((function t(e){var r,n,s,a,h,u,l,f,d,y,p,v,m,g,x,z,V,b,S,w,M,O,j,k;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r=e.data,n=r.integrator,s=r.g,a=r.dt,h=r.tol,u=r.minDt,l=r.maxDt,f=r.elapsedTime,d=r.masses,y=r.departure,p=r.arrival,v=r.target,m=r.primary,g=G(n,{g:s,dt:a,tol:h,minDt:u,maxDt:l,masses:d,elapsedTime:f}),x=c()(g.masses,1),z=x[0],V=R(g.masses,"name",v),b=0;b<g.masses.length;b++)(S=g.masses[b].name)!==v&&S!==m&&S!==v.perturber&&(g.masses.splice(b,1),b--);return w=R(g.masses,"name",m).m,M=function(){return new Promise((function(t){var e=setInterval((function(){for(var r=0;r<15;r++)g.iterate();g.elapsedTime>=p&&(V=R(g.masses,"name",v),clearInterval(e),t(Z(g.elapsedTime-y,z,V,s*w)))}),16)}))},t.next=9,M();case 9:O=t.sent,j=c()(O,1),k=j[0],self.postMessage({trajectory:[{x:k.initVel.x,y:k.initVel.y,z:k.initVel.z},{x:k.finalVel.x,y:k.finalVel.y,z:k.finalVel.z,p:o()({},V,{t:g.elapsedTime})}]});case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]);